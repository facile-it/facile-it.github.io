<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/engineering.facile.it\/"
        },
        "articleSection" : "blog",
        "name" : "From development to production with Docker and AWS Elastic Beanstalk",
        "headline" : "From development to production with Docker and AWS Elastic Beanstalk",
        "description" : "\u003ch1 id=\u0022it-works-on-my-machine\u0022\u003eIt works on my machine\u003c\/h1\u003e\n\u003cp\u003eThis post is addressed to people who already have \u003ca href=\u0022https:\/\/docs.docker.com\/articles\/basics\u0022\u003ebasic knowledge about docker\u003c\/a\u003e, about how it works and are looking for a way to move to the next step with the goal of using it in development and production day by day.\u003c\/p\u003e\n\u003cp\u003eHaving a development\/testing environment \u003cstrong\u003eas close as possible\u003c\/strong\u003e to the production one helps a lot in assuring that \u003cstrong\u003ethings will behave correctly when delivered\u003c\/strong\u003e.\u003c\/p\u003e",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2015",
        "datePublished": "2015-10-19 00:00:00 \u002b0000 UTC",
        "dateModified" : "2015-10-19 00:00:00 \u002b0000 UTC",
        "url" : "https:\/\/engineering.facile.it\/blog\/eng\/from-development-to-production-with-docker-and-amazon-ecs\/",
        "wordCount" : "1457",
        "keywords" : [ "Blog" ]
    }
    </script>
        
            
                <title>From development to production with Docker and AWS Elastic Beanstalk</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="referrer" content="always">
        <meta name="generator" content="Hugo 0.134.2">
        


        
        
            
                <meta name="description" content="It works on my machine
This post is addressed to people who already have basic knowledge about docker, about how it works and are looking for a way to move to the next step with the goal of using it in development and production day by day.
Having a development/testing environment as close as possible to the production one helps a lot in assuring that things will behave correctly when delivered.">
            
        

        
<meta name="twitter:card" content="summary_large_image"/>

    
        <meta name="twitter:image" content="https://engineering.facile.it/images/social/social-preview.png"/>
        <meta name="og:image" content="https://engineering.facile.it/images/social/social-preview.png"/>
    



<meta name="og:title" content="From development to production with Docker and AWS Elastic Beanstalk"/>
<meta name="og:description" content="It works on my machine
This post is addressed to people who already have basic knowledge about docker, about how it works and are looking for a way to move to the next step with the goal of using it in development and production day by day.
Having a development/testing environment as close as possible to the production one helps a lot in assuring that things will behave correctly when delivered."/>


    
        
    



    <meta name="twitter:site" content="@FacileIt_Engr"/>



        <meta property="og:url" content="https://engineering.facile.it/blog/eng/from-development-to-production-with-docker-and-amazon-ecs/">
  <meta property="og:site_name" content="Facile.it Engineering">
  <meta property="og:title" content="From development to production with Docker and AWS Elastic Beanstalk">
  <meta property="og:description" content="It works on my machine This post is addressed to people who already have basic knowledge about docker, about how it works and are looking for a way to move to the next step with the goal of using it in development and production day by day.
Having a development/testing environment as close as possible to the production one helps a lot in assuring that things will behave correctly when delivered.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2015-10-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2015-10-19T00:00:00+00:00">


        
            
                <meta property="og:image" content="https://engineering.facile.it/images/social/social-preview.jpg">
            
        

        
  <meta itemprop="name" content="From development to production with Docker and AWS Elastic Beanstalk">
  <meta itemprop="description" content="It works on my machine This post is addressed to people who already have basic knowledge about docker, about how it works and are looking for a way to move to the next step with the goal of using it in development and production day by day.
Having a development/testing environment as close as possible to the production one helps a lot in assuring that things will behave correctly when delivered.">
  <meta itemprop="datePublished" content="2015-10-19T00:00:00+00:00">
  <meta itemprop="dateModified" content="2015-10-19T00:00:00+00:00">
  <meta itemprop="wordCount" content="1457">
  <meta itemprop="keywords" content="Lorenzo,English,Docker,AWS">

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/additional.css">
            <link rel="stylesheet" href="/css/add-on.css">
            <link rel="stylesheet" href="/css/academicons.min.css">
        

        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/monokai-sublime.min.css' rel='stylesheet' type='text/css' />
  


      
    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="/">Facile.it Engineering</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/categories/">
                            <i class="fa fa-folder-open">&nbsp;</i>Categories
                    </a>
                </li>
            
                <li>
                    <a href="/authors/">
                            <i class="fa fa-pencil">&nbsp;</i>Authors
                    </a>
                </li>
            
                <li>
                    <a href="/ita/careers/">
                            <i class="fa fa-briefcase">&nbsp;</i>Careers
                    </a>
                </li>
            
                <li>
                    <a href="/eng/who-we-are/">
                            <i class="fa fa-users">&nbsp;</i>Who we are
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="https://engineering.facile.it/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="https://engineering.facile.it/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/categories/">
                            <h3>
                                <i class="fa fa-folder-open">&nbsp;</i>Categories
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/authors/">
                            <h3>
                                <i class="fa fa-pencil">&nbsp;</i>Authors
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/ita/careers/">
                            <h3>
                                <i class="fa fa-briefcase">&nbsp;</i>Careers
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/eng/who-we-are/">
                            <h3>
                                <i class="fa fa-users">&nbsp;</i>Who we are
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/eng/hack-the-box-experience/">Hack the Box Experience</a></h3>
                                
                                <time class="published" datetime=
                                    '2024-05-30'>
                                    May 30, 2024</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/eng/v-protetto17-5-2024/">Venerdì Protetto | May 2024 edition</a></h3>
                                
                                <time class="published" datetime=
                                    '2024-05-20'>
                                    May 20, 2024</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/eng/v-protetto8-3-2024/">Venerdì Protetto | March edition</a></h3>
                                
                                <time class="published" datetime=
                                    '2024-03-11'>
                                    March 11, 2024</time>
                            </header>
                            

                        </article>
                

                
                    <a href=
                        
                            /blog/
                        
                        class="button">View more posts</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa-solid fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="//x.com/share?url=https%3a%2f%2fengineering.facile.it%2fblog%2feng%2ffrom-development-to-production-with-docker-and-amazon-ecs%2f&amp;text=From%20development%20to%20production%20with%20Docker%20and%20AWS%20Elastic%20Beanstalk&amp;via=FacileIt_Engr" target="_blank" class="share-btn twitter">
    <i class="fa-brands fa-square-x-twitter"></i>
    <p>X</p>
    </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fengineering.facile.it%2fblog%2feng%2ffrom-development-to-production-with-docker-and-amazon-ecs%2f" target="_blank" class="share-btn facebook">
    <i class="fa-brands fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=https%3a%2f%2fengineering.facile.it%2fblog%2feng%2ffrom-development-to-production-with-docker-and-amazon-ecs%2f&amp;title=From%20development%20to%20production%20with%20Docker%20and%20AWS%20Elastic%20Beanstalk" target="_blank" class="share-btn reddit">
    <i class="fa-brand fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fengineering.facile.it%2fblog%2feng%2ffrom-development-to-production-with-docker-and-amazon-ecs%2f&amp;title=From%20development%20to%20production%20with%20Docker%20and%20AWS%20Elastic%20Beanstalk" target="_blank" class="share-btn linkedin">
      <i class="fa-brand fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>




<li>
  <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fengineering.facile.it%2fblog%2feng%2ffrom-development-to-production-with-docker-and-amazon-ecs%2f&amp;title=From%20development%20to%20production%20with%20Docker%20and%20AWS%20Elastic%20Beanstalk" target="_blank" class="share-btn stumbleupon">
    <i class="fa-brand fa-stumbleupon"></i>
    <p>StumbleUpon</p>
  </a>
</li>




<li>
  <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fengineering.facile.it%2fblog%2feng%2ffrom-development-to-production-with-docker-and-amazon-ecs%2f&amp;description=From%20development%20to%20production%20with%20Docker%20and%20AWS%20Elastic%20Beanstalk" target="_blank" class="share-btn pinterest">
    <i class="fa-brand fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by &amp;body=https%3a%2f%2fengineering.facile.it%2fblog%2feng%2ffrom-development-to-production-with-docker-and-amazon-ecs%2f" target="_blank" class="share-btn email">
    <i class="fa-solid fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h1><a href="/blog/eng/from-development-to-production-with-docker-and-amazon-ecs/">From development to production with Docker and AWS Elastic Beanstalk</a></h1>
            
        
        
        
            <p class="translated-article">
                Questo articolo è disponibile anche
                <a href="/blog/ita/da-sviluppo-a-produzione-con-docker-e-aws-elastic-beanstalk/">in italiano</a>
            </p>
        
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2015-10-19'>
            19 October 2015
        </time>

        
            <a href="/authors/lorenzo/" class="author">
            
                <span class="name">Lorenzo Fontana</span>
                <img src="https://www.gravatar.com/avatar/3460c18dc12b30037f8937bce6641c4b" alt="Lorenzo Fontana avatar" />
            
            </a>
        

        
            <p>7 minute read</p>
        
    </div>
</header>


  


  

  <div id="content">
    <h1 id="it-works-on-my-machine">It works on my machine</h1>
<p>This post is addressed to people who already have <a href="https://docs.docker.com/articles/basics">basic knowledge about docker</a>, about how it works and are looking for a way to move to the next step with the goal of using it in development and production day by day.</p>
<p>Having a development/testing environment <strong>as close as possible</strong> to the production one helps a lot in assuring that <strong>things will behave correctly when delivered</strong>.</p>
<p>In a typical scenario, the developer has all the services on which the application depends installed on his local machine, which means the following:</p>
<ul>
<li>there&rsquo;s no isolation between projects using the same services (versions, configurations, data);</li>
<li>it&rsquo;s hard to have and maintain production-like services&rsquo; versions and configurations in development;</li>
<li>sharing the development environment with co-workers is difficult if not impossible;</li>
</ul>
<p>All of that leads to one of the worst sentences I&rsquo;ve ever heard saying in my experience:</p>
<blockquote>
<p>It works on my machine.</p>
</blockquote>
<p><img src="/images/from-development-to-production-with-docker-and-amazon-ecs/wmm.jpg" alt="It works on my machine meme"></p>
<p>You might think that I could obtain the same results using Vagrant or plain virtual machines but that solution wouldn&rsquo;t give me the benefit of having an extra layer of abstraction without having to worry about the overhead. In fact I can have more and more containers running on a single machine than I can have with virtualization.</p>
<h1 id="bookshelf-application">Bookshelf application</h1>
<p>To streamline this article I prepared a <a href="https://github.com/pennyphp/bookshelf">demo application</a> using the <a href="http://github.com/pennyphp/penny">Penny PHP Framework</a>: it&rsquo;s a simple book archiving application, that allows the user to create and view a list of books.</p>
<h2 id="download-and-dependencies">Download and dependencies</h2>
<p>First, download the demo application from its repository:</p>
<pre tabindex="0"><code>git clone https://github.com/pennyphp/bookshelf
</code></pre><p>PHP Dependencies are managed through <a href="https://getcomposer.org/">composer</a>, and to get them just issue the following:</p>
<pre tabindex="0"><code>composer install
</code></pre><p>Frontend assets are managed through <a href="http://bower.io">Bower</a> + <a href="http://gruntjs.com/">Grunt</a>; the following two commands will respectively download build dependencies and then build the assets, by copying them in the public directory:</p>
<pre tabindex="0"><code>npm install
grunt dev
</code></pre><h2 id="up-and-running-development-environment">Up and running development environment</h2>
<p>As you can see the demo app comes with a docker development environment that can be found under the <a href="https://github.com/pennyphp/bookshelf/tree/master/docker/development">docker/development</a> folder.</p>
<p>By inspecting the content of the <code>docker/development</code> folder we can find two directories:</p>
<ul>
<li><code>nginx/</code>: this directory contains a Dockerfile that inherits from the <a href="https://github.com/fntlnz/dockerfiles/tree/master/nginx">fntlnz/nginx</a> image to create a new one with the needed nginx configurations;</li>
<li><code>fpm/</code>: this directory contains a Dockerfile that inherits from the <a href="https://github.com/fntlnz/dockerfiles/tree/master/php">fntlnz/php</a> image to create a new one with the needed php-fpm configurations and extensions;</li>
</ul>
<p>Because we don&rsquo;t have Elastic Beanstalk on our local machine (we&rsquo;ll talk about it later) and we need a way to orchestrate our containers, we&rsquo;ll do it by using <strong>docker-compose</strong>. I decided to use Docker Compose instead of using the <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-local.html"><strong>eb local</strong></a> command (which allows to run elastic beanstalk environment in local) because at the state of art compose is easier to use and to manage in local.</p>
<h4 id="the-docker-composeyml">The <code>docker-compose.yml</code></h4>
<p>In order to do so we have to create a <code>docker-compose.yml</code> in our project root.</p>
<pre tabindex="0"><code>cp docker/docker-compose.yml.development docker-compose.yml
</code></pre><p>At this point, in our <code>docker-compose.yml</code> we should have four containers to start:</p>
<ul>
<li>the <strong>Nginx</strong> container, which contains a server block  for the bookshelf application listening on port 80.</li>
<li>the <strong>fpm</strong> container, which does have a shared volume with the host machine so you can change the code without the need to rebuild the container image; also, the container is linked with the mysql container to allow mysql access from php scripts;</li>
<li>the <strong>mysql</strong> container, which will contain our development data;</li>
<li>the <strong>redis</strong> container, used for caching purposes, mainly by Doctrine;</li>
</ul>
<p>Please note that since <a href="https://docs.docker.com/userguide/dockerlinks/">containers are linked</a> you can access to an exposed service by using the name given to the linked container; for example, in our case the fpm container is <a href="https://github.com/pennyphp/bookshelf/blob/2e55738da9ff9e45fa44add9d97280635e95399d/docker/docker-compose.yml.development#L19-L20">linked to the mysql container</a>: that&rsquo;s why the configured host is <code>mysql</code> in the <a href="https://github.com/pennyphp/bookshelf/blob/2e55738da9ff9e45fa44add9d97280635e95399d/config/doctrine.local.php.dist#L13">doctrine local connection configuration</a>.</p>
<p>If you haven&rsquo;t done it yet, you need to build the <code>fpm</code> docker image and download the <code>nginx</code>, <code>mysql</code> and <code>redis</code> images; to do so, issue the following:</p>
<pre tabindex="0"><code>$ docker-compose build
</code></pre><p>Now that you have all what you need you can start the containers with:</p>
<pre tabindex="0"><code>$ docker-compose up
</code></pre><p>At this point the four containers should be up and running: you can check if everything&rsquo;s okay by issuing the <code>docker ps</code> command.</p>
<p>To proceed, we need to know the ip address of our nginx container. Since the nginx container&rsquo;s port forwarding configuration is <code>80:80</code>, on <strong>linux</strong> it should be available at <code>127.0.0.1:80</code> or <code>localhost:80</code>, while on <strong>OS X</strong> it should be available at the ip address associated to the docker-machine host; to retrieve it, issue the following:</p>
<pre tabindex="0"><code>docker-machine env &lt;yourmachinename&gt; | grep DOCKER_HOST
</code></pre><p>It&rsquo;s time to point your browser to the nginx container ip address!</p>
<p><img src="/images/from-development-to-production-with-docker-and-amazon-ecs/books.png" alt="Bookshelf screenshot"></p>
<p>Yay! Our development environment is up and running!</p>
<h2 id="up-and-running-production-environment">Up and running production environment</h2>
<p>At this point we need a solution to deploy our application in production that can: run Docker containers, scale without hassle and possibly have other nice things already setup like, let&rsquo;s say, monitoring.</p>
<p>The choice fell on <a href="https://aws.amazon.com/elasticbeanstalk">AWS Elastic Beanstalk</a> because it has all those things and in addition it has a more competitive pricing model with an initial <a href="https://aws.amazon.com/free/">Free Tier</a> which it is enough to run this demo.</p>
<p>Before we start we need an <strong>Amazon Web Services</strong> account, if you don&rsquo;t have one yet, you can create it <a href="https://aws.amazon.com/account">here</a></p>
<p>To configure, deploy and manage our infrastructure we are going to need the <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html">eb command</a>, to get it:</p>
<pre tabindex="0"><code>pip install awsebcli
</code></pre><p>In order to obtain access to the platform from your command line using the <strong>eb</strong> command you have to setup an <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/AWSHowTo.iam.roles.aeb.html"><strong>IAM ROLE</strong></a> and associate it to an <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html"><strong>IAM User</strong></a>. The IAM User creation wizard will <strong>give you two keys</strong>, namely the <em>AWS Access Key ID</em> and the <em>AWS Secret Access Key</em>. We are going to need them during the next step.</p>
<p>At this point we can <strong>initialize</strong> our bookshelf project. This command will prompt us for the two Access keys plus a few question about our setup.</p>
<pre tabindex="0"><code>eb init
</code></pre><p>Now that the project is initialized we have to <strong>create a new environment</strong>. This will actually start a <strong>t2.micro EC2</strong> instance, create the security groups, the load balancer, cloudwatch alarms etc..</p>
<pre tabindex="0"><code>eb create bookshelf-production
</code></pre><p>Before deploying the application to production we have to generate a <a href="https://github.com/settings/tokens/new">Github Token for composer</a>.
This is needed to allow composer to download dependencies without hassle.
To add the token to your environment:</p>
<pre tabindex="0"><code>eb setenv COMPOSER_TOKEN=&lt;your-token-here&gt;
</code></pre><p>Now you can check if the system is ready issuing a:</p>
<pre tabindex="0"><code>eb status
</code></pre><p>When the status becomes <strong>Ready</strong> you can actually deploy the application with a:</p>
<pre tabindex="0"><code>eb deploy
</code></pre><p>The deployment will create the containers described in the <a href="https://github.com/pennyphp/bookshelf/blob/2e55738da9ff9e45fa44add9d97280635e95399d/Dockerrun.aws.json">Dockerrun.aws.json</a> and create the files described in the <a href="https://github.com/pennyphp/bookshelf/blob/2e55738da9ff9e45fa44add9d97280635e95399d/.ebextensions/dependencies.config">dependencies.config</a> file.</p>
<p>If you are asking yourslef what the <strong>Dockerrun.aws.json</strong> actually is, suffice it to say that is to Elastic beanstalk as the <code>docker-compose.yml</code> is to the local environment.</p>
<p>The files contained in the <a href="https://github.com/pennyphp/bookshelf/blob/2e55738da9ff9e45fa44add9d97280635e95399d/.ebextensions/">.ebextensions</a> allows you to customize and configure the software that your application depends on. The <strong>dependencies.config</strong> is one of them. It actually resolves composer dependencies, build frontend assets using grunt and bower and create the PHP FPM image using the production <a href="https://github.com/pennyphp/bookshelf/blob/2e55738da9ff9e45fa44add9d97280635e95399d/docker/production/fpm/Dockerfile">Dockerfile</a>. It&rsquo;s important to note that the image is rebuilt only if changes are made to the Dockerfile.</p>
<p>As you may have noticed, the <a href="https://github.com/pennyphp/bookshelf/blob/2e55738da9ff9e45fa44add9d97280635e95399d/Dockerrun.aws.json">Dockerrun.aws.json</a> contains definitions just for the Nginx and fpm containers. This is because for <strong>Redis</strong> and <strong>Mysql</strong> we are going to use respectively <a href="https://aws.amazon.com/elasticache/"><strong>Elasticache</strong></a> and <a href="https://aws.amazon.com/rds/"><strong>RDS</strong></a>. RDS and Elasticache are two production ready, scalable and reliable solutions that makes easier to setup a cost-efficient relational database and key value store taking charge of common database administration tasks.</p>
<p>The Bookshelf application by default is configured to take Mysql and Redis connection parameters <a href="https://github.com/pennyphp/bookshelf/blob/2e55738da9ff9e45fa44add9d97280635e95399d/config/doctrine.global.php">from environment variables</a> which are:</p>
<pre tabindex="0"><code>MYSQL_HOST
MYSQL_PORT
MYSQL_USERNAME
MYSQL_PASSWORD
MYSQL_DATABASE
REDIS_HOST
REDIS_PORT
</code></pre><p>Each one of these environment variables can be set using the command we previously used for the <code>COMPOSER_TOKEN</code>.</p>
<p>You can obtain Mysql and Redis connection parameters after creating an <a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_CreateInstance.html">RDS Mysql DB instance</a> and an <a href="http://docs.aws.amazon.com/opsworks/latest/userguide/other-services-redis-cluster.html">ElastiCache Redis Cluster</a></p>
<p>At this point with the running Nginx and fpm containers and configured databases you can issue an <code>eb open</code> to open the live production application and see if all&rsquo;s okay!</p>
<p>As well as ready your infrastructure is also ready to scale and auto scale, to move a first step trough this direction you can take a look at the <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-scale.html"><code>eb scale</code></a> command and at the <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.managing.as.html">AWS documentation</a>.</p>
<p><strong>Troubleshooting</strong>: If something went wrong you can ssh into the elastic beanstalk EC2 machine with a <code>eb ssh</code> and inspect containers status using tools you already know like <code>docker logs</code>.</p>
<h1 id="you-are-done">You are done!</h1>
<p>You can now save a lot of time automating your workflow using docker while having a fully working, self-contained and shareable development environment very close to your running, stable and efficient production infrastructure over which you have full control of the resources.</p>
<p><img src="/images/from-development-to-production-with-docker-and-amazon-ecs/good-job.jpg" alt="congratulations"></p>

  </div>

  

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa-solid fa-folder"></i>
                
                
                <li><a class="article-category-link" href="https://engineering.facile.it/categories/english">English</a></li>
                
                
                <li><a class="article-category-link" href="https://engineering.facile.it/categories/docker">Docker</a></li>
                
                
                <li><a class="article-category-link" href="https://engineering.facile.it/categories/aws">AWS</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
    </ul>
  </li>
</ul>

  </footer>

</article>


<ul class="actions pagination">
    
        <li><a href="/blog/ita/paraunit/"
                class="button big previous">Paraunit: test paralleli, Doctrine e le fixture</a></li>
    

    
        <li><a href="/blog/ita/da-sviluppo-a-produzione-con-docker-e-aws-elastic-beanstalk/"
                class="button big next">Da sviluppo a produzione con Docker e AWS Elastic Beanstalk</a></li>
    
</ul>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='/'><img src="/images/logo_engineering.png" width="100%" alt="Facile.it Engineering" /></a>
      
    
    
      <header>
        <h2></h2>
        <p>News, repos, tips & trends from the Facile.it Engineering team!</p>
      </header>
    
    
      <ul class="icons">
        
          <li>
            <a href="" type="application/rss+xml" target="_blank" title="RSS" class="fa-solid fa-rss"></a>
          </li>
        
        
  <li><a href="//github.com/facile-it" target="_blank" title="GitHub" class="fa-brand fa-github"></a></li>



























  <li><a href="//linkedin.com/company/facile-it" target="_blank" title="LinkedIn Company" class="fa-brand fa-linkedin"></a></li>









  <li><a href="//facebook.com/facile.it" target="_blank" title="Facebook" class="fa-brands fa-facebook-square"></a></li>









  <li><a href="//youtube.com/user/Facileit" target="_blank" title="YouTube" class="fa-brand fa-youtube"></a></li>













  <li><a href="//instagram.com/facile.it" target="_blank" title="Instagram" class="fa-brand fa-instagram"></a></li>





  <li><a href="//x.com/FacileIt_Engr" target="_blank" title="Twitter" class="fa-brand fa-square-x-twitter"></a></li>























      </ul>
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <div class="author-avatars">
                
                  
                    <a href="/authors/agiorgianni/" class="author" title="See other posts from Alessio Giorgianni">
                      <img src="https://www.gravatar.com/avatar" alt="Alessio Giorgianni avatar" class="author-avatar"/>
                    </a>
                  
                
                  
                    <a href="/authors/mgarza/" class="author" title="See other posts from Matteo Garza">
                      <img src="/images/avatar-mgarza.jpeg" alt="Matteo Garza avatar" class="author-avatar"/>
                    </a>
                  
                
              </div>

              <h3>
                <a href="/blog/eng/hack-the-box-experience/">Hack the Box Experience</a>
              </h3>
              
              <time class="published" datetime='2024-05-30'>
                30 May 2024
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <div class="author-avatars">
                
                  
                    <a href="/authors/engineering/" class="author" title="See other posts from Facile.it engineers">
                      <img src="https://avatars1.githubusercontent.com/u/8501934?v=3&amp;s=200" alt="Facile.it engineers avatar" class="author-avatar"/>
                    </a>
                  
                
              </div>

              <h3>
                <a href="/blog/eng/v-protetto17-5-2024/">Venerdì Protetto | May 2024 edition</a>
              </h3>
              
              <time class="published" datetime='2024-05-20'>
                20 May 2024
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <div class="author-avatars">
                
                  
                    <a href="/authors/mgarza/" class="author" title="See other posts from Matteo Garza">
                      <img src="/images/avatar-mgarza.jpeg" alt="Matteo Garza avatar" class="author-avatar"/>
                    </a>
                  
                
                  
                    <a href="/authors/ana-radujko/" class="author" title="See other posts from Ana Radujko">
                      <img src="https://s.gravatar.com/avatar/13c2d19c1d59562ca74b71f5444943c5?s=80" alt="Ana Radujko avatar" class="author-avatar"/>
                    </a>
                  
                
              </div>

              <h3>
                <a href="/blog/eng/v-protetto8-3-2024/">Venerdì Protetto | March edition</a>
              </h3>
              
              <time class="published" datetime='2024-03-11'>
                11 March 2024
              </time>
            </header>
            

          </article>
        
      </div>

      
        <a href=
          
            /blog/
          
        class="button">View more posts</a>
      
    </div>
  </section>

  
  
  
  
  
    <section id="categories">
      <header>
        <h3>
          <a href="/categories/">Top categories</a></h3>
      </header>
        
          
        

        
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/conferences/">Conferences</a>
                <span style="float:right;">10</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/docker/">Docker</a>
                <span style="float:right;">6</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/english/">English</a>
                <span style="float:right;">41</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/functional-programming/">Functional Programming</a>
                <span style="float:right;">11</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/italiano/">Italiano</a>
                <span style="float:right;">34</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/oop/">OOP</a>
                <span style="float:right;">6</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/open-source/">Open Source</a>
                <span style="float:right;">7</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/php/">PHP</a>
                <span style="float:right;">23</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/protected-fridays/">Protected Fridays</a>
                <span style="float:right;">14</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/software-testing/">Software Testing</a>
                <span style="float:right;">7</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/swift/">Swift</a>
                <span style="float:right;">8</span>
              
            </header>
          </article>
        </p>
        
    
            
        <p>
          <article>
            <header>
              
                <a href="https://engineering.facile.it/categories/symfony/">Symfony</a>
                <span style="float:right;">5</span>
              
            </header>
          </article>
        </p>
        
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
        <p>
            <a href="/categories/" class="button">View more categories</a>
        </p>
    </section>
  
  

  
  
    <section id="mini-bio">
      <h3>About</h3>
      <p>Facile.it relies on a big and keen crew of developers. Since 2008, the group’s projects are based on PHP, and as time goes by new technologies become part of corporate know how. This blog allows our developers to share tips and direct experiences with new technologies.</p>
      <a href="/ita/chi-siamo/" class="button">Learn More</a>
    </section>
  

  
  <section id="footer">
    
      <ul class="icons">
        
          <li>
            <a href="" type="application/rss+xml" target="_blank" title="RSS" class="fa-solid fa-rss"></a>
          </li>
        
        
  <li><a href="//github.com/facile-it" target="_blank" title="GitHub" class="fa-brand fa-github"></a></li>



























  <li><a href="//linkedin.com/company/facile-it" target="_blank" title="LinkedIn Company" class="fa-brand fa-linkedin"></a></li>









  <li><a href="//facebook.com/facile.it" target="_blank" title="Facebook" class="fa-brands fa-facebook-square"></a></li>









  <li><a href="//youtube.com/user/Facileit" target="_blank" title="YouTube" class="fa-brand fa-youtube"></a></li>













  <li><a href="//instagram.com/facile.it" target="_blank" title="Instagram" class="fa-brand fa-instagram"></a></li>





  <li><a href="//x.com/FacileIt_Engr" target="_blank" title="Twitter" class="fa-brand fa-square-x-twitter"></a></li>























      </ul>
    
    <p class="copyright">
      
        &copy; 2024
        
          Facile.it Engineering
        
      .
      <a href="/ita/disclaimer/" rel="nofollow">Disclaimer</a><br>
      Design <a href="http://html5up.net" rel="nofollow" target="_blank">HTML5 UP</a><br>
      Ported by <a href="//github.com/jpescador" rel="nofollow" target="_blank">Julio Pescador</a><br>
      Modified by <a href="//github.com/Jean85" rel="nofollow" target="_blank">Alessandro Lai</a><br>
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa-solid fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/kotlin.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/objectivec.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/python.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/swift.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
      <script src="/js/backToTop.js"></script>
      <script type="text/javascript" src="/js/jquery-lazy/jquery.lazy.min.js"></script>
    

    

    
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


    <script type="text/javascript">
        $(function() {
            $('.lazy').Lazy();
        });
    </script>
  </body>
</html>

